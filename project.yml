name: jjstats
options:
  bundleIdPrefix: sh.saqoo
  deploymentTarget:
    macOS: "14.0"
  xcodeVersion: "16.0"
  generateEmptyDirectories: true

settings:
  base:
    MARKETING_VERSION: "1.1.0"
    CURRENT_PROJECT_VERSION: "6"
    SWIFT_VERSION: "6.0"
    MACOSX_DEPLOYMENT_TARGET: "14.0"

targets:
  jjstats:
    type: application
    platform: macOS
    sources:
      - path: Sources/jjstats
        excludes:
          - "**/.DS_Store"
          - "AppIcon.icon"
    postCompileScripts:
      - name: Compile Icon with Liquid Glass
        script: |
          xcrun actool "${PROJECT_DIR}/Sources/jjstats/Assets.xcassets" "${PROJECT_DIR}/Sources/jjstats/AppIcon.icon" \
            --compile "${BUILT_PRODUCTS_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}" \
            --output-format human-readable-text \
            --notices --warnings \
            --app-icon AppIcon \
            --include-all-app-icons \
            --enable-on-demand-resources NO \
            --development-region en \
            --target-device mac \
            --minimum-deployment-target "${MACOSX_DEPLOYMENT_TARGET}" \
            --platform macosx \
            --output-partial-info-plist "${TEMP_DIR}/actool_icon.plist"
        basedOnDependencyAnalysis: false
    settings:
      PRODUCT_BUNDLE_IDENTIFIER: sh.saqoo.jjstats
      PRODUCT_NAME: jjstats
      INFOPLIST_FILE: Sources/jjstats/Info.plist
      GENERATE_INFOPLIST_FILE: false
      CODE_SIGN_STYLE: Automatic
      DEVELOPMENT_TEAM: G5G54TCH8W
      ENABLE_HARDENED_RUNTIME: YES
      ASSETCATALOG_COMPILER_APPICON_NAME: AppIcon
      ASSETCATALOG_COMPILER_INCLUDE_ALL_APPICON_ASSETS: YES
    info:
      path: Sources/jjstats/Info.plist
      properties:
        CFBundleName: jjstats
        CFBundleDisplayName: jjstats
        CFBundleIdentifier: sh.saqoo.jjstats
        CFBundleVersion: "1"
        CFBundleShortVersionString: "1.0"
        CFBundlePackageType: APPL
        CFBundleExecutable: jjstats
        LSMinimumSystemVersion: "14.0"
        NSHighResolutionCapable: true
        LSApplicationCategoryType: public.app-category.developer-tools
